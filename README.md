# nextbtcpool
Self-host your own transparent nextBTC mining pool. PPLNS, fixed 1% operator fee, 0% dev fee.
# nbpool - Self-Hosted nextBTC Mining Pool Deployment Guide

## ğŸš€ Introduction

**nbpool** is a lightweight, high-performance, self-hosted mining pool designed specifically for the nextBTC network. It utilizes the **PPLNS (Pay Per Last N Shares)** reward distribution model and aims to provide community members with a stable, transparent, and easy-to-deploy mining solution.

## âœ¨ Core Features

*   **PPLNS Reward System**: Fairly rewards long-term, loyal miners.
*   **No Registration Required**: Miners can start mining immediately using their nextBTC wallet address as their username.
*   **Automated Payouts**: The system automatically processes batch payments to miners who have reached the minimum payout threshold, requiring no manual intervention.
*   **Lightweight & Efficient**: Low resource consumption, making it suitable for a wide range of server hardware.
*   **API Support**: Provides a simple API server for users to check pool statistics and their personal hashrate.
*   **<ins>Transparent Fee Model</ins>**: **<ins>A fixed 1% pool fee with zero developer share, ensuring transparency for both operators and miners.</ins>**

## ğŸ’° Fee Structure & Revenue Transparency

**To build complete trust and transparency, nbpool operates on a clear and unchangeable fee structure:**

1.  **Fixed Pool Fee**: The pool's operational fee is fixed at **1%**. This rate is hard-coded into the software and **cannot be modified by the operator**.
2.  **Operator's Revenue**: This 1% fee is the sole source of revenue for the pool operator (you). It is automatically deducted from mined block rewards and retained in your configured pool wallet to cover server costs, maintenance, and other expenses.
3.  **Guaranteed Miner Share**: Participating miners will fairly share the remaining **99%** of the block rewards according to the PPLNS algorithm.
4.  **Zero Developer Fee**: **Crucially, the original author of the nbpool software does not take any form of developer fee or share.** All revenue generated by the pool (the 1% fee) belongs entirely to the person who deploys and operates it.

**This model provides a clear incentive for operators to maintain a healthy pool while assuring miners that they are receiving the maximum possible reward with no hidden fees.**

## ğŸ“‹ Prerequisites

Before you begin, please ensure you meet all of the following requirements:

1.  **Server**: A server with a public IP address, running **Ubuntu 24.04.2 LTS or a later version**.
2.  **nextBTC Full Node**: A fully installed and completely synchronized nextBTC Core wallet (full node) running on the server.
3.  **Sufficient Wallet Balance**: To ensure the payment script can process payouts to miners promptly and reliably, make sure the pool's full node wallet has an available balance of **at least 300 nextBTC**.

---

## ğŸ”§ Deployment Steps

### Step 1: Installation & Preparation

First, upload the `nbpool.zip` package to your server's home directory (`~/`) and unzip it.

```bash
# Unzip the package
unzip nbpool.zip

# Navigate into the nbpool directory
cd ~/nbpool

# Grant executable permissions to all binaries
chmod +x *
```

After unzipping, you will find three core executable files:
*   `nextbtcpool`: The main pool server program.
*   `payment_script`: The automated payout and reward distribution script.
*   `api_server`: The API server for querying statistics.

### Step 2: Configure the nextBTC Full Node

Ensure your full node's `bitcoin.conf` configuration file includes the following settings. This allows the pool software to communicate securely with your node via RPC.

**Important**: If any of these settings are missing from your `bitcoin.conf`, add them and then **completely restart** the nextBTC Core wallet.

```properties
# Enable the RPC server
server=1 
# Listen on all network interfaces for connections
listen=1
# Maintain a full transaction index, required by the payment script
txindex=1
# --- RPC Authentication ---
rpcuser=nextbtc
rpcpassword=nextbtc
# Bind to the local loopback address for security
rpcbind=127.0.0.1
# Only allow RPC connections from localhost
rpcallowip=127.0.0.1
# The RPC port
rpcport=8554
# Set a fallback fee in case fee estimation fails
fallbackfee=0.0001
# Automatically load the specified pool wallet on startup
wallet=pool_hot_wallet
```
> **Tip**: You can customize the `rpcuser` and `rpcpassword`, but you must ensure they match the configuration in `nbpool.conf` in a later step.

### Step 3: Create and Configure the Pool Wallet

For security and management purposes, we will create a dedicated hot wallet for the pool.

```bash
# Create a new wallet named "pool_hot_wallet"
bitcoin-cli createwallet "pool_hot_wallet"

# Generate a new receiving address for this wallet. This address will receive all block rewards mined by the pool.
# Be sure to save the generated address; you will need it for the next step.
bitcoin-cli -rpcwallet=pool_hot_wallet getnewaddress "nbPool address"
```

### Step 4: Configure the Pool Software

Next, edit the main pool configuration file, `nbpool.conf`.

```bash
vim nbpool.conf
```

Modify the contents to match the format below, ensuring you update the critical fields with your specific information:

```json
{
    "btcd" :  [
        {
            "url" : "127.0.0.1:8554",
            "auth" : "nextbtc",
            "pass" : "nextbtc",
            "notify" : false
        }
    ],

    "btcaddress" : "bc1..................................................",
    "btcsig" : "/Mined by YourPoolName/",

    "serverurl" : [
        "0.0.0.0:13003"
    ],

    "mindiff" : 1,
    "startdiff" : 1,
    "maxdiff" : 0
}
```

**Key fields to modify:**
*   `auth` / `pass`: Must match the `rpcuser` / `rpcpassword` you set in `bitcoin.conf` **exactly**.
*   `btcaddress`: Must be replaced with the pool's receiving address you generated in **Step 3**.
*   `btcsig`: (Optional) You can customize this signature, which will appear in the coinbase transaction of blocks mined by your pool.
*   `serverurl`: `0.0.0.0:13003` instructs the pool to listen on port `13003` on all available network interfaces. You can change the port if needed.

Save and exit the editor once you have made the changes.

### Step 5: Launch the Pool Service

You are all set! You can now start the main pool program. It is highly recommended to run it in the background using `nohup` or within a `screen`/`tmux` session to prevent it from terminating if your SSH connection drops.

```bash
# Start the pool in the background and redirect its log output to pool.log
nohup ./nextbtcpool -c nbpool.conf -l 7 > pool.log 2>&1 &
```
Your pool is now running and listening for miner connections on port `13003`.

---

## â›ï¸ Miner Connection Guide

Miners can connect to your pool using any mining software that supports the SHA256d algorithm.

*   **Pool URL**: `stratum+tcp://%POOL_SERVER_IP%:13003`
*   **Username**: `%WALLET_ADDRESS%` (The miner's own nextBTC receiving address)
*   **Password**: Any string (e.g., `x` or `nextbtc`)

**cpuminer-opt Example:**
```bash
cpuminer-avx2.exe -a sha256d -o stratum+tcp://%POOL_SERVER_IP%:13003 -u %WALLET_ADDRESS% -p x -t 3
```
> Replace `%POOL_SERVER_IP%` with your server's public IP address and `%WALLET_ADDRESS%` with the miner's personal wallet address.

---

## ğŸ’° Management & Automated Payouts

### Configure the Automated Payment Script

To automatically distribute the rewards collected by the pool to the miners who have earned them, we need to set up a scheduled task (cron job) to run the `payment_script`.

1.  Open the crontab editor:
    ```bash
    crontab -e
    ```

2.  Add the following line to the end of the file:
    ```crontab
    0 */4 * * * /root/nbpool/payment_script >> /root/nbpool/logs/payment.log 2>&1
    ```
    > **Explanation**: This configuration will automatically execute the payment script **every 4 hours**. All output, including successful payment records and any errors, will be appended to the log file at `/root/nbpool/logs/payment.log`. The script will process payouts for all miners whose balance has reached the **0.1 nextBTC** minimum threshold.

3.  Save and exit the crontab editor.

### Launch the API Query Server

To allow miners to view pool statistics and their personal mining data, start the `api_server`.

```bash
cd ~/nbpool
# Start the API server in the background and log its output to api.log
nohup ./api_server > api.log 2>&1 &
```

Once started, anyone can access the pool's statistics by visiting `http://%POOL_SERVER_IP%:13002` in a web browser.
> **Note**: The API server port is currently fixed to `13002` and cannot be customized.

**Congratulations! You have successfully deployed a fully functional and transparent nextBTC mining pool.**
======================================================================================
# nbpool - nextBTCè‡ªæ‰˜ç®¡çŸ¿æ± éƒ¨ç½²æŒ‡å—

## ğŸš€ ç®€ä»‹

**nbpool** æ˜¯ä¸€ä¸ªä¸“ä¸º nextBTC ç½‘ç»œè®¾è®¡çš„è½»é‡çº§ã€é«˜æ€§èƒ½çš„è‡ªæ‰˜ç®¡çŸ¿æ± ã€‚å®ƒé‡‡ç”¨ **PPLNS (Pay Per Last N Shares)** æ”¶ç›Šåˆ†é…æ¨¡å¼ï¼Œæ—¨åœ¨ä¸ºç¤¾åŒºæˆå‘˜æä¾›ä¸€ä¸ªç¨³å®šã€é€æ˜ä¸”æ˜“äºéƒ¨ç½²çš„æŒ–çŸ¿è§£å†³æ–¹æ¡ˆã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

*   **PPLNS åˆ†é…æ¨¡å¼**: å…¬å¹³å¥–åŠ±é•¿æœŸå¿ è¯šçš„çŸ¿å·¥ã€‚
*   **å…æ³¨å†Œ**: æŒ–çŸ¿ç”¨æˆ·æ— éœ€æ³¨å†Œï¼Œç›´æ¥ä½¿ç”¨å…¶ nextBTC é’±åŒ…åœ°å€ä½œä¸ºç”¨æˆ·åå³å¯å¼€å§‹æŒ–çŸ¿ã€‚
*   **è‡ªåŠ¨æ”¯ä»˜**: ç³»ç»Ÿè‡ªåŠ¨ä¸ºè¾¾åˆ°æœ€ä½æ”¯ä»˜é—¨æ§›çš„ç”¨æˆ·æ‰¹é‡å¤„ç†ä»˜æ¬¾ï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚
*   **è½»é‡é«˜æ•ˆ**: èµ„æºå ç”¨ä½ï¼Œå¯¹æœåŠ¡å™¨è¦æ±‚å‹å¥½ã€‚
*   **APIæ”¯æŒ**: æä¾›ç®€æ´çš„APIæœåŠ¡ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥è¯¢çŸ¿æ± çŠ¶æ€å’Œä¸ªäººç®—åŠ›ã€‚
*   **<ins>é€æ˜çš„è´¹ç”¨æ¨¡å‹</ins>**: **<ins>å›ºå®šçš„1%çŸ¿æ± è´¹ç”¨ï¼Œæ— ä»»ä½•å¼€å‘è€…æŠ½æ°´ï¼Œä¿è¯è¿è¥è€…å’ŒçŸ¿å·¥çš„æ”¶ç›Šé€æ˜åŒ–ã€‚</ins>**

## ğŸ’° **è´¹ç”¨ç»“æ„ä¸æ”¶ç›Šé€æ˜åº¦**

**ä¸ºäº†å»ºç«‹å®Œå…¨çš„ä¿¡ä»»å’Œé€æ˜åº¦ï¼Œnbpool é‡‡ç”¨äº†æ¸…æ™°ä¸”ä¸å¯æ›´æ”¹çš„è´¹ç”¨ç»“æ„ï¼š**

1.  **å›ºå®šçš„çŸ¿æ± è´¹ç”¨**: çŸ¿æ± çš„è¿è¥è´¹ç”¨å›ºå®šä¸º **1%**ã€‚è¿™ä¸ªè´¹ç‡æ˜¯ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­çš„ï¼Œ**éƒ¨ç½²è€…æ— æ³•ä¿®æ”¹**ã€‚
2.  **è¿è¥è€…æ”¶ç›Š**: è¿™ 1% çš„è´¹ç”¨æ˜¯çŸ¿æ± éƒ¨ç½²è€…ï¼ˆå³æ‚¨ï¼‰çš„å”¯ä¸€æ”¶ç›Šæ¥æºã€‚å®ƒä¼šè‡ªåŠ¨ä»æŒ–å‡ºçš„åŒºå—å¥–åŠ±ä¸­æ‰£é™¤ï¼Œå¹¶ä¿ç•™åœ¨æ‚¨é…ç½®çš„çŸ¿æ± æ”¶æ¬¾åœ°å€ä¸­ï¼Œç”¨äºè¦†ç›–æœåŠ¡å™¨ã€ç»´æŠ¤ç­‰æˆæœ¬ã€‚
3.  **çŸ¿å·¥æ”¶ç›Šä¿éšœ**: å‚ä¸æŒ–çŸ¿çš„ç”¨æˆ·å°†æ ¹æ®PPLNSç®—æ³•ï¼Œå…¬å¹³åˆ†é…å‰©ä½™ **99%** çš„åŒºå—å¥–åŠ±ã€‚
4.  **é›¶å¼€å‘è€…æŠ½æ°´**: **è‡³å…³é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œnbpool çŸ¿æ± è½¯ä»¶çš„åŸå§‹ä½œè€…ä¸æ”¶å–ä»»ä½•å½¢å¼çš„å¼€å‘è€…è´¹ç”¨æˆ–æŠ½æ°´ã€‚** æ‰€æœ‰çŸ¿æ± äº§ç”Ÿçš„æ”¶ç›Šï¼ˆå³é‚£1%çš„è´¹ç”¨ï¼‰å®Œå…¨å½’å±äºçŸ¿æ± çš„éƒ¨ç½²å’Œè¿è¥è€…ã€‚

**è¿™ä¸ªæ¨¡å‹ç¡®ä¿äº†çŸ¿æ± éƒ¨ç½²è€…æœ‰æ˜ç¡®çš„æ¿€åŠ±æ¥ç»´æŠ¤çŸ¿æ± ï¼ŒåŒæ—¶ä¹Ÿå‘çŸ¿å·¥ä¿è¯äº†ä»–ä»¬èƒ½è·å¾—æœ€å¤§åŒ–çš„ã€æ— éšè—è´¹ç”¨çš„æŒ–çŸ¿å›æŠ¥ã€‚**

## ğŸ“‹ éƒ¨ç½²å‰ç½®æ¡ä»¶

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼š

1.  **æœåŠ¡å™¨**: ä¸€å°æ‹¥æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ï¼Œæ“ä½œç³»ç»Ÿä¸º **Ubuntu 24.04.2 LTS æˆ–æ›´é«˜ç‰ˆæœ¬**ã€‚
2.  **nextBTC å…¨èŠ‚ç‚¹**: æœåŠ¡å™¨ä¸Šå·²æˆåŠŸéƒ¨ç½²å¹¶å®Œå…¨åŒæ­¥äº† nextBTC æ ¸å¿ƒé’±åŒ…ï¼ˆå…¨èŠ‚ç‚¹ï¼‰ã€‚
3.  **å……è¶³çš„é’±åŒ…ä½™é¢**: ä¸ºç¡®ä¿æ”¯ä»˜è„šæœ¬èƒ½é¡ºåˆ©ã€åŠæ—¶åœ°ä¸ºçŸ¿å·¥å‘æ”¾å¥–åŠ±ï¼Œè¯·ç¡®ä¿çŸ¿æ± è¿æ¥çš„å…¨èŠ‚ç‚¹é’±åŒ…ä¸­**è‡³å°‘æœ‰ 300 nextBTC** çš„å¯ç”¨ä½™é¢ã€‚

---

## ğŸ”§ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: å®‰è£…ä¸å‡†å¤‡

é¦–å…ˆï¼Œå°† `nbpool.zip` è½¯ä»¶åŒ…ä¸Šä¼ åˆ°æ‚¨çš„æœåŠ¡å™¨ä¸»ç›®å½• (`~/`) å¹¶è§£å‹ã€‚

```bash
# è§£å‹è½¯ä»¶åŒ…
unzip nbpool.zip

# è¿›å…¥nbpoolç›®å½•
cd ~/nbpool

# ä¸ºæ‰€æœ‰ç¨‹åºæˆäºˆå¯æ‰§è¡Œæƒé™
chmod +x *
```

è§£å‹åï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸‰ä¸ªæ ¸å¿ƒç¨‹åºæ–‡ä»¶ï¼š
*   `nextbtcpool`: çŸ¿æ± ä¸»æœåŠ¡ç¨‹åºã€‚
*   `payment_script`: è‡ªåŠ¨æ”¯ä»˜ä¸å¥–åŠ±åˆ†é…è„šæœ¬ã€‚
*   `api_server`: ç”¨äºæ•°æ®æŸ¥è¯¢çš„APIæœåŠ¡ã€‚

### æ­¥éª¤ 2: é…ç½® nextBTC å…¨èŠ‚ç‚¹

ç¡®ä¿æ‚¨çš„å…¨èŠ‚ç‚¹ `bitcoin.conf` é…ç½®æ–‡ä»¶ä¸­åŒ…å«ä»¥ä¸‹è®¾ç½®ã€‚è¿™å°†å…è®¸çŸ¿æ± ç¨‹åºé€šè¿‡RPCå®‰å…¨åœ°ä¸æ‚¨çš„èŠ‚ç‚¹é€šä¿¡ã€‚

**é‡è¦**: å¦‚æœæ‚¨çš„ `bitcoin.conf` ä¸­ç¼ºå°‘ä»»ä½•ä¸€é¡¹ï¼Œè¯·æ·»åŠ å**å®Œå…¨é‡å¯** nextBTC æ ¸å¿ƒé’±åŒ…ã€‚

```properties
# å¯ç”¨RPCæœåŠ¡
server=1 
# ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œä»¥ä¾¿çŸ¿æ± è¿æ¥
listen=1
# ç»´æŠ¤å®Œæ•´çš„äº¤æ˜“ç´¢å¼•ï¼Œæ”¯ä»˜è„šæœ¬éœ€è¦æ­¤åŠŸèƒ½
txindex=1
# --- RPCè®¤è¯ä¿¡æ¯ ---
rpcuser=nextbtc
rpcpassword=nextbtc
# ä»…ç»‘å®šåˆ°æœ¬åœ°å›ç¯åœ°å€ä»¥ç­–å®‰å…¨
rpcbind=127.0.0.1
# ä»…å…è®¸æ¥è‡ªæœ¬åœ°çš„RPCè¿æ¥
rpcallowip=127.0.0.1
# RPCç«¯å£
rpcport=8554
# è®¾å®šä¸€ä¸ªé»˜è®¤çš„äº¤æ˜“è´¹ï¼Œä»¥é˜²è´¹ç”¨ä¼°ç®—å¤±è´¥
fallbackfee=0.0001
# å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½æŒ‡å®šçš„çŸ¿æ± é’±åŒ…
wallet=pool_hot_wallet
```
> **æç¤º**: æ‚¨å¯ä»¥è‡ªå®šä¹‰ `rpcuser` å’Œ `rpcpassword`ï¼Œä½†å¿…é¡»ç¡®ä¿å®ƒä»¬ä¸åç»­ `nbpool.conf` ä¸­çš„é…ç½®ä¿æŒä¸€è‡´ã€‚

### æ­¥éª¤ 3: åˆ›å»ºå¹¶é…ç½®çŸ¿æ± ä¸“ç”¨é’±åŒ…

ä¸ºäº†å®‰å…¨å’Œç®¡ç†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†ä¸ºçŸ¿æ± åˆ›å»ºä¸€ä¸ªä¸“ç”¨çš„çƒ­é’±åŒ…ã€‚

```bash
# åˆ›å»ºä¸€ä¸ªåä¸º "pool_hot_wallet" çš„æ–°é’±åŒ…
bitcoin-cli createwallet "pool_hot_wallet"

# ä¸ºæ–°é’±åŒ…ç”Ÿæˆä¸€ä¸ªæ”¶æ¬¾åœ°å€ï¼Œç”¨äºæ¥æ”¶æ‰€æœ‰æŒ–çŸ¿äº§å‡ºçš„åŒºå—å¥–åŠ±
# è¯·åŠ¡å¿…å¦¥å–„ä¿ç®¡è¿™ä¸ªç”Ÿæˆçš„åœ°å€ï¼Œä¸‹ä¸€æ­¥é…ç½®ä¸­ä¼šç”¨åˆ°
bitcoin-cli -rpcwallet=pool_hot_wallet getnewaddress "nbPool address"
```

### æ­¥éª¤ 4: é…ç½®çŸ¿æ± 

ç°åœ¨ï¼Œç¼–è¾‘çŸ¿æ± çš„ä¸»é…ç½®æ–‡ä»¶ `nbpool.conf`ã€‚

```bash
vim nbpool.conf
```

å°†å…¶ä¸­çš„å†…å®¹ä¿®æ”¹ä¸ºå¦‚ä¸‹æ ¼å¼ï¼Œå¹¶ç¡®ä¿å…³é”®å­—æ®µå·²æ›´æ–°ä¸ºæ‚¨çš„å®é™…ä¿¡æ¯ï¼š

```json
{
    "btcd" :  [
        {
            "url" : "127.0.0.1:8554",
            "auth" : "nextbtc",
            "pass" : "nextbtc",
            "notify" : false
        }
    ],

    "btcaddress" : "bc1..................................................",
    "btcsig" : "/Mined by YourPoolName/",

    "serverurl" : [
        "0.0.0.0:13003"
    ],

    "mindiff" : 1,
    "startdiff" : 1,
    "maxdiff" : 0
}
```

**å…³é”®ä¿®æ”¹é¡¹:**
*   `auth` / `pass`: å¿…é¡»ä¸æ‚¨åœ¨ `bitcoin.conf` ä¸­è®¾ç½®çš„ `rpcuser` / `rpcpassword` **å®Œå…¨ä¸€è‡´**ã€‚
*   `btcaddress`: å¿…é¡»æ›¿æ¢ä¸ºæ‚¨åœ¨**æ­¥éª¤ 3** ä¸­ç”Ÿæˆçš„çŸ¿æ± æ”¶æ¬¾åœ°å€ã€‚
*   `btcsig`: (å¯é€‰) æ‚¨å¯ä»¥ä¿®æ”¹è¿™é‡Œçš„ç­¾åä¿¡æ¯ï¼Œå®ƒä¼šå‡ºç°åœ¨çŸ¿æ± æŒ–å‡ºçš„åŒºå—ä¸­ã€‚
*   `serverurl`: `0.0.0.0:13003` è¡¨ç¤ºçŸ¿æ± å°†ç›‘å¬æœåŠ¡å™¨ä¸Šæ‰€æœ‰ç½‘ç»œæ¥å£çš„ `13003` ç«¯å£ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ç«¯å£å·ã€‚

ä¿®æ”¹å®Œæˆåï¼Œä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚

### æ­¥éª¤ 5: å¯åŠ¨çŸ¿æ± æœåŠ¡

ä¸€åˆ‡å°±ç»ªï¼ç°åœ¨å¯ä»¥å¯åŠ¨çŸ¿æ± ä¸»ç¨‹åºäº†ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ `nohup` æˆ– `screen`/`tmux` ä»¥åå°æ¨¡å¼è¿è¡Œï¼Œä»¥é˜²SSHæ–­å¼€è¿æ¥ã€‚

```bash
# ä»¥åå°æ¨¡å¼å¯åŠ¨çŸ¿æ± ï¼Œå¹¶å°†æ—¥å¿—è¾“å‡ºåˆ° pool.log
nohup ./nextbtcpool -c nbpool.conf -l 7 > pool.log 2>&1 &
```
ç°åœ¨ï¼Œæ‚¨çš„çŸ¿æ± å·²ç»åœ¨ `13003` ç«¯å£ä¸Šè¿è¡Œå¹¶ç­‰å¾…çŸ¿å·¥è¿æ¥ã€‚

---

## â›ï¸ çŸ¿å·¥è¿æ¥æŒ‡å—

çŸ¿å·¥å¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒ SHA256d ç®—æ³•çš„æŒ–çŸ¿è½¯ä»¶è¿æ¥åˆ°æ‚¨çš„çŸ¿æ± ã€‚

*   **çŸ¿æ± åœ°å€ (URL)**: `stratum+tcp://%POOL_SERVER_IP%:13003`
*   **ç”¨æˆ·å (Username)**: `%WALLET_ADDRESS%` (çŸ¿å·¥è‡ªå·±çš„nextBTCæ”¶æ¬¾åœ°å€)
*   **å¯†ç  (Password)**: ä»»æ„å­—ç¬¦ (ä¾‹å¦‚ `x` æˆ– `nextbtc`)

**cpuminer-opt ç¤ºä¾‹:**
```bash
cpuminer-avx2.exe -a sha256d -o stratum+tcp://%POOL_SERVER_IP%:13003 -u %WALLET_ADDRESS% -p x -t 3
```
> è¯·å°† `%POOL_SERVER_IP%` æ›¿æ¢ä¸ºæ‚¨æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€ï¼Œå°† `%WALLET_ADDRESS%` æ›¿æ¢ä¸ºçŸ¿å·¥è‡ªå·±çš„é’±åŒ…åœ°å€ã€‚

---

## ğŸ’° ç®¡ç†ä¸è‡ªåŠ¨æ”¯ä»˜

### é…ç½®è‡ªåŠ¨æ”¯ä»˜è„šæœ¬

ä¸ºäº†å°†çŸ¿æ± åœ°å€æ”¶åˆ°çš„å¥–åŠ±è‡ªåŠ¨åˆ†é…ç»™è¾¾æ ‡çš„çŸ¿å·¥ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æ¥æ‰§è¡Œ `payment_script`ã€‚

1.  æ‰“å¼€ `crontab` ç¼–è¾‘å™¨ï¼š
    ```bash
    crontab -e
    ```

2.  åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä¸€è¡Œï¼š
    ```crontab
    0 */4 * * * /root/nbpool/payment_script >> /root/nbpool/logs/payment.log 2>&1
    ```
    > **è¯´æ˜**: æ­¤é…ç½®ä¼š**æ¯éš”4å°æ—¶**è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡æ”¯ä»˜è„šæœ¬ã€‚æ‰€æœ‰æ‰§è¡Œæ—¥å¿—ï¼ˆåŒ…æ‹¬æˆåŠŸå’Œå¤±è´¥çš„è®°å½•ï¼‰éƒ½å°†é™„åŠ åˆ° `/root/nbpool/logs/payment.log` æ–‡ä»¶ä¸­ã€‚è„šæœ¬ä¼šè‡ªåŠ¨ä¸ºæ‰€æœ‰ä½™é¢è¾¾åˆ° **0.1 nextBTC** æœ€ä½æ”¯ä»˜é—¨æ§›çš„ç”¨æˆ·å‘èµ·è½¬è´¦ã€‚

3.  ä¿å­˜å¹¶é€€å‡º `crontab`ã€‚

### å¯åŠ¨APIæŸ¥è¯¢æœåŠ¡

ä¸ºäº†è®©çŸ¿å·¥å¯ä»¥æŸ¥è¯¢çŸ¿æ± çŠ¶æ€å’Œä¸ªäººæŒ–çŸ¿æ•°æ®ï¼Œè¯·å¯åŠ¨ `api_server`ã€‚

```bash
cd ~/nbpool
# ä»¥åå°æ¨¡å¼å¯åŠ¨APIæœåŠ¡
nohup ./api_server > api.log 2>&1 &
```

å¯åŠ¨åï¼Œä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡è®¿é—® `http://%POOL_SERVER_IP%:13002` æ¥æŸ¥çœ‹çŸ¿æ± ç»Ÿè®¡ä¿¡æ¯ã€‚
> **æ³¨æ„**: APIæœåŠ¡çš„ç«¯å£å½“å‰å›ºå®šä¸º `13002`ï¼Œæš‚ä¸æ”¯æŒè‡ªå®šä¹‰ã€‚

**æ­å–œï¼æ‚¨å·²æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œäº†ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æ”¶ç›Šé€æ˜çš„ nextBTC çŸ¿æ± ã€‚**

================================================================
